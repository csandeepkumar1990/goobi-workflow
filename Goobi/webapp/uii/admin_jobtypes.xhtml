<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
	xmlns:h="http://xmlns.jcp.org/jsf/html" 
	xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:jsf="http://xmlns.jcp.org/jsf"  
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:o="http://omnifaces.org/ui" 
	xmlns:of="http://omnifaces.org/functions" 
	template="/uii/template/template.html" 
	xmlns:x="http://myfaces.apache.org/tomahawk" 
	xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

    <ui:param name="myPageTitle" value="#{msgs.manageAutomaticTasks}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb id="index" label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}" action="index" navId="a0" />
        <intranda:breadcrumb id="admin" label="#{msgs.manageAutomaticTasks}" action="admin_jobtypes.xhtml" noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <h:form>
            <div class="box box-bordered box-color orange">
                <div class="box-title">
                    <h2>
                        <i class="fa fa-gears"></i>
                        <h:outputText value="#{msgs.pauseAutomaticTasks}" />
                    </h2>
                </div>
                <div class="box-content">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="newJobtTypeName">#{msgs.jobTypeName}</label>
                                <h:inputText 
                                    pt:placeholder="#{msgs.jobTypeName}" 
                                    value="#{JobTypesBean.newJobTypeName}"
                                    styleClass="form-control"
                                    id="newJobtTypeNameId"
                                    name="newJobtTypeName"/>
                            </div>
                            <button class="pull-right btn btn-blue" jsf:action="#{JobTypesBean.addNewJobType}">
                                <f:ajax execute="newJobtTypeNameId" render="@form" />
                                #{msgs.createNewJobType}
                            </button>
                            <div class="clearfix"></div>
                            <hr />
                			<ui:repeat var="jobType" value="#{JobTypesBean.jobTypes}">
                                <div class="box box-color #{jobType.selected ? orange : lightgrey}">
                                    <div class="box-title" style="color: white; border-color: #666666 !important;">
                                        #{jobType.name}
                                    </div>
                                    <div class="box-content" style="border-color: #666666 !important;">
                                        <ui:repeat var="stepTitle" value="#{jobType.stepNames}">
                                            <button class="badge badge-no-radius badge-light-blue" 
                                                jsf:action="#{JobTypesBean.removeStepFromJobType(stepTitle, jobType)}">
                                                <f:ajax render="@form"/>
                                                #{stepTitle}
                                                <i class="fa fa-plus margin-left-5"></i>
                                            </button>
                                        </ui:repeat>
                                    </div>
                                </div>
                            </ui:repeat>
                        </div>
    			        <div class="col-md-6">
            				<ui:repeat var="stepTitle" value="#{JobTypesBean.stepTitles}">
            					<button class="badge badge-no-radius badge-light-blue" 
                                    jsf:action="#{JobTypesBean.addStepToCurrentJobType(stepTitle)}">
                                    <f:ajax render="@form"/>
                                    #{stepTitle}
                                    <i class="fa fa-plus margin-left-5"></i>
                                </button>
            				</ui:repeat>
                        </div><!-- /col-md-6 -->
                    </div><!-- /row -->
                    
                    <div class="row">
                        <div class="col-md-12">
                            <hr />
                            <button class="btn btn-blue pull-right" jsf:action="#{JobTypesBean.apply}">
                                #{msgs.save}
                            </button>
                        </div>
                    </div>
    			</div><!-- /box-content -->
        	</div>
        </h:form>
    </ui:define>
    
</ui:composition>