<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

    <composite:interface />

    <composite:implementation>
        <h:form id="menu">
            <a aria-label="intranda Logo"
                href="index.xhtml"
                id="brand">&#160;</a>

            <ui:insert name="menu-content">
                <ui:include src="inc_menu_mobile.xhtml" />
            </ui:insert>

            <h:panelGroup class="rendered-in-wide-window">
                <!-- toggle mobile menu -->
                <a
                    href="#"
                    class="toggle-mobile">
                    <i class="fa fa-bars"></i>
                </a>

                <div class="user">
                    <ul class="icon-nav" style="height: 100%">
                        <li>
                            <button
                                class="btn"
                                jsf:id="showHelp"
                                aria-label="#{msgs.showHelpMessages}"
                                jsf:action="#{NavigationForm.Reload}"
                                title="#{NavigationForm.showHelp?msgs.hideHelpMessages:msgs.showHelpMessages}"
                                jsf:rel="tooltip"
                                data-placement="bottom">
                                <i class="fa #{not NavigationForm.showHelp?'fa-question':'fa-question-circle'}"></i>
                                <f:passThroughAttribute
                                    name="data-toggle"
                                    value="tooltip"/>
                                <f:setPropertyActionListener
                                    target="#{NavigationForm.showHelp}"
                                    value="#{not NavigationForm.showHelp}" />
                            </button>
                        </li>
                        <li class="dropdown language-select">
                            <div data-toggle="tooltip" title="#{msgs.spracheAendern}" data-placement="bottom">
	                            <button
	                                type="button"
	                                id="nav-language"
	                                aria-label="#{msgs.spracheAendern}"
	                                data-toggle="dropdown"
	                                aria-haspopup="true"
	                                class="dropdown-toggle btn"
	                                title="#{msgs.spracheAendern}"
	                                jsf:rel="tooltip">
	                                
	                                <img
	                                    alt="#{SpracheForm.locale}"
	                                    src="template/img/flags/#{SpracheForm.locale}.gif" />
	                                <span></span>
	                            </button>
                                <!--
                                <a
                                    href="#"
                                    id="nav-language"
                                    aria-label="#{msgs.spracheAendern}"
                                    data-toggle="dropdown"
                                    class="dropdown-toggle"
                                    title="#{msgs.spracheAendern}">
                                    <img
                                        alt=""
                                        src="template/img/flags/#{SpracheForm.locale}.gif" />
                                    <span></span>
                                </a>
                                -->
	                            <ul class="dropdown-menu pull-right">
	                                <ui:repeat
	                                    var="availableLanguage"
	                                    value="#{SpracheForm.supportedLocales}"
	                                    id="plugin4">
	                                    <li>
	                                        <button
	                                            jsf:id="locale"
	                                            class="dropdown-item text_head"
	                                            jsf:action="#{SpracheForm.SpracheUmschalten}"
	                                            title="#{availableLanguage.displayLanguageTranslated}">
	                                            <f:param
	                                                name="locale"
	                                                value="#{availableLanguage.id}" />
	                                            <f:setPropertyActionListener
	                                                value="#{null}"
	                                                target="#{SessionForm.dateFormatter}" />
	                                            <h:graphicImage value="template/img/flags/#{availableLanguage.id}.gif" />
	                                            <span>
	                                                <h:outputText value="#{msgs[availableLanguage.displayLanguageSelf]}" />
	                                            </span>
	                                        </button>
	                                    </li>
	                                </ui:repeat>
	                            </ul>
	                         </div>
                        </li>
	                </ul>
                    <div class="dropdown">
                        <button
                            id="nav-account"
                            type="button"
                            class="dropdown-toggle btn"
                            aria-haspopup="true"
                            data-toggle="dropdown">
                            <h:outputText
                                rendered="#{LoginForm.myBenutzer != null}"
                                value="#{LoginForm.myBenutzer.vorname} #{LoginForm.myBenutzer.nachname}" />
                            <c:if test="#{empty LoginForm.myBenutzer.imageUrl}">
                                <img
                                    alt=""
                                    src="template/img/intranda.png" />
                            </c:if>
                            <c:if test="#{not empty LoginForm.myBenutzer.imageUrl}">
                                <img
                                    src="#{LoginForm.myBenutzer.imageUrl}"
                                    alt="" />
                            </c:if>
                        </button>

                        <ul class="dropdown-menu pull-right">
                            <!-- Benutzerkonfiguration -->
                            <intranda:menuItem
                                id="a50"
                                parentMenu="menu_account"
                                label="#{msgs.benutzerkonfiguration}"
                                action="user_config"
                                display="#{NavigationForm.uiStatus.user_config}"
                                icon="fa fa-user-circle-o box-icon-fix-menu-up3" />

                            <!-- Passwort aendern -->
                            <h:panelGroup rendered="#{HelperForm.passwordIsChangable}">
                                <intranda:menuItem
                                    id="a51"
                                    parentMenu="menu_account"
                                    label="#{msgs.passwortAendern}"
                                    action="user_password"
                                    icon="fa fa-key box-icon-fix-menu-up3" />
                            </h:panelGroup>

                            <li>
                                <button
                                    jsf:id="showEasyRead"
                                    jsf:action="#{NavigationForm.Reload}"
                                    class="dropdown-item"
                                    title="#{NavigationForm.showEasyRead?msgs.hideEasyRead:msgs.showEasyRead}"
                                    jsf:rel="tooltip">
                                    <i class="fa fa-eye-slash margin-right-5" />
                                    <h:outputText value="#{NavigationForm.showEasyRead?msgs.hideEasyRead:msgs.showEasyRead}" />
                                    <f:setPropertyActionListener
                                        target="#{NavigationForm.showEasyRead}"
                                        value="#{not NavigationForm.showEasyRead}" />
                                </button>
                            </li>

                            <!-- logout -->
                            <ui:fragment rendered="#{!LoginForm.useOpenIDConnect}">
                                <intranda:menuItem
                                    id="a52"
                                    parentMenu="menu_account"
                                    label="#{msgs.logout}"
                                    action="#{LoginForm.Ausloggen}"
                                    icon="fa fa-power-off box-icon-fix-menu" />
                            </ui:fragment>
                            <ui:fragment rendered="#{LoginForm.useOpenIDConnect}">
                                <intranda:menuItem
                                    id="openIdLogout"
                                    parentMenu="menu_account"
                                    label="#{msgs.logout}"
                                    action="#{LoginForm.logoutOpenId}"
                                    icon="fa fa-power-off box-icon-fix-menu" />
                            </ui:fragment>
                        </ul>
                    </div>
                </div>
            </h:panelGroup>

        </h:form>
    </composite:implementation>
</ui:composition>