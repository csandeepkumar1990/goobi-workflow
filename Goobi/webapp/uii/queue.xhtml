<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    template="/uii/template/template.html"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

    <ui:param
        name="myPageTitle"
        value="#{msgs.menu_administration_currentQueue}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb
            id="index"
            label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}"
            action="index"
            navId="a0" />
        <intranda:breadcrumb
            id="admin"
            label="#{msgs.menu_administration_currentQueue}"
            action="queue.xhtml"
            noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">


        <div class="row">
            <div class="col-sm-12">
                <div class="box box-bordered box-color">
                    <div class="box-title">
                        <h3>
                            <i class="fa fa-list"></i>
                            <h:outputText value="#{msgs.message_queue_slowQueue}" />
                        </h3>
                    </div>
                    <div class="box-content nopadding">
                        <div class="dataTables_wrapper">
                            <h:form id="slow_queue">

                                <x:dataTable
                                    styleClass="table table-hover table-nomargin dataTable table-bordered responsive"
                                    var="ticket"
                                    value="#{jmsBean.activeSlowQueryMesssages}">

                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_id}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.messageId}" />
                                    </x:column>

                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_type}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.taskType}" />
                                    </x:column>

                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_processId}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.processId}" />
                                    </x:column>
                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_processName}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.processName}" />
                                    </x:column>


                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_stepId}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.stepId}" />
                                    </x:column>
                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_stepName}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.stepName}" />
                                    </x:column>
                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_properties}" />
                                        </f:facet>
                                        <x:dataList
                                            var="prop"
                                            value="#{ticket.properties.keySet()}">
                                            <h:outputText value="#{prop}: #{ticket.properties[prop]} " />
                                            <br />
                                        </x:dataList>
                                    </x:column>
                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.auswahl}" />
                                        </f:facet>
                                        <h:commandLink
                                            action="#{jmsBean.deleteSlowQueryTicket(ticket)}"
                                            rel="tooltip"
                                            onclick="preventDoubleSubmit(this);"
                                            title="#{msgs.message_queue_cancel_ticket}">
                                            <i class="btn fa fa-trash-o" />
                                        </h:commandLink>
                                    </x:column>
                                </x:dataTable>
                                <div
                                    class="dataTables_info"
                                    style="float: none;">
                                    <h:commandLink
                                        styleClass="btn pull-right font-size-s margin-right-10 margin-bottom-more"
                                        action="#{jmsBean.clearSlowQueryQueue}"
                                        title="#{msgs.message_queue_clear}">
                                        <i class="fa fa-trash-o margin-right-less" />
                                        <h:outputText value="#{msgs.message_queue_clear}" />
                                    </h:commandLink>
<!-- 
                                    <h:commandLink
                                        styleClass="btn margin-right-10"
                                        title="queue"
                                        action="#{jmsBean.initConnection}">
                                        <h:outputText value="queue" />
                                    </h:commandLink>

                                    <h:commandLink
                                        styleClass="btn margin-right-10"
                                        title="submitDummyTicket"
                                        action="#{jmsBean.submitDummyTicket}">
                                        <h:outputText value="submitDummyTicket" />
                                    </h:commandLink>

                                    <h:commandLink
                                        styleClass="btn margin-right-10"
                                        title="submitSlowQueryDummyTicket"
                                        action="#{jmsBean.submitSlowQueryDummyTicket}">
                                        <h:outputText value="submitSlowQueryDummyTicket" />
                                    </h:commandLink>
 -->                                    
                                </div>
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <br />



        <div class="row">
            <div class="col-sm-12">
                <div class="box box-bordered box-color">
                    <div class="box-title">
                        <h3>
                            <i class="fa fa-list"></i>
                            <h:outputText value="#{msgs.message_queue_fastQueue}" />
                        </h3>
                    </div>
                    <div class="box-content nopadding">
                        <div class="dataTables_wrapper">
                            <h:form id="fast_queue">

                                <x:dataTable
                                    styleClass="table table-hover table-nomargin dataTable table-bordered responsive"
                                    var="ticket"
                                    value="#{jmsBean.activeFastQueryMesssages}">

                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_id}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.messageId}" />
                                    </x:column>

                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_type}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.taskType}" />
                                    </x:column>

                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_processId}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.processId}" />
                                    </x:column>
                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_processName}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.processName}" />
                                    </x:column>


                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_stepId}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.stepId}" />
                                    </x:column>
                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_stepName}" />
                                        </f:facet>
                                        <h:outputText value="#{ticket.stepName}" />
                                    </x:column>
                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.message_queue_ticket_properties}" />
                                        </f:facet>
                                        <x:dataList
                                            var="prop"
                                            value="#{ticket.properties.keySet()}">
                                            <h:outputText value="#{prop}: #{ticket.properties[prop]} " />
                                            <br />
                                        </x:dataList>
                                    </x:column>
                                    <x:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.auswahl}" />
                                        </f:facet>
                                        <h:commandLink
                                            action="#{jmsBean.deleteFastQueryTicket(ticket)}"
                                            rel="tooltip"
                                            onclick="preventDoubleSubmit(this);"
                                            title="#{msgs.message_queue_cancel_ticket}">
                                            <i class="btn fa fa-trash-o" />
                                        </h:commandLink>
                                    </x:column>
                                </x:dataTable>
                                <div
                                    class="dataTables_info"
                                    style="float: none;">
                                    <h:commandLink
                                        styleClass="btn pull-right font-size-s margin-right-10 margin-bottom-more"
                                        action="#{jmsBean.clearFastQueryQueue}"
                                        title="#{msgs.message_queue_clear}">
                                        <i class="fa fa-trash-o margin-right-less" />
                                        <h:outputText value="#{msgs.message_queue_clear}" />
                                    </h:commandLink>

                                </div>
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>

</ui:composition>