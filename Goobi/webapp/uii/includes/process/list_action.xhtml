<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:composite="http://xmlns.jcp.org/jsf/composite" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:x="http://myfaces.apache.org/tomahawk" xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <composite:interface>
    </composite:interface>

    <composite:implementation>

        <h:panelGroup rendered="#{ProzessverwaltungForm.modusAnzeige!='vorlagen' and ProzessverwaltungForm.modusAnzeige=='aktuell' and LoginForm.hasRole('Workflow_Processes') and (LoginForm.hasRole('Workflow_Processes_Allow_GoobiScript') or LoginForm.hasRole('Workflow_Processes_Allow_Download') or LoginForm.hasRole('Workflow_Processes_Allow_Export') or LoginForm.hasRole('Statistics_General'))}">

            <div class="row">
                <div class="col-sm-12">

                    <div class="box box-color orange box-bordered">
                        <div class="box-title">
                            <h3>
                                <i class="fa fa-wrench"></i>
                                <h:outputText value="#{msgs.moeglicheAktionen}" />
                            </h3>
                        </div>
                        <div class="box-content ">

                            <h:form prependId="false">
                                <ul class="action-ul">

                                    <h:panelGroup rendered="#{ProzessverwaltungForm.allowFolderLinkingForProcessList}">

                                        <h:panelGroup rendered="#{LoginForm.myBenutzer.mitMassendownload and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                            <li class="action-li">
                                                <!-- Upload-Schaltknopf -->
                                                <h:commandLink  action="#{ProzessverwaltungForm.UploadFromHomeAlle}" id="uploadFromHome" title="#{msgs.verzeichnisFertigAusHomeverzeichnisEntfernen}" onclick="if (!confirm('#{msgs.upload}')) return false">
                                                    <span class="btn btn-lightred margin-right-10 fa fa-cloud-upload fa-lg width-40" />
                                                    <h:outputText value="#{msgs.verzeichnisFertigAusHomeverzeichnisEntfernen}" />
                                                </h:commandLink>
                                            </li>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{LoginForm.myBenutzer.mitMassendownload and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                            <li class="action-li">

                                                <h:commandLink onclick="toggle('possibleActions1')" id="downloadToHome">
                                                    <span class="btn btn-green margin-right-10 fa fa-cloud-download fa-lg width-40" />
                                                    <h:outputText value="#{msgs.downloadInMeinHomeverzeichnis}" />
                                                    <f:ajax render="expandbutton1" />
                                                </h:commandLink>

                                                <ul id="possibleActions1" style="display: none" class="action-intent-ul">
                                                    <li class="action-intent-li">
                                                        <!-- Download-Schaltknopf für Selection-->
                                                        <h:commandLink action="#{ProzessverwaltungForm.DownloadToHomeSelection}" id="downloadToHomeSelection" rendered="#{ProzessverwaltungForm.anzeigeAnpassen['selectionBoxes']}" title="#{msgs.auswahl2}" onclick="if (!confirm('#{msgs.download}')) return false">
                                                            <span class="btn margin-right-10 fa fa-angle-right" />
                                                            <h:outputText value="#{msgs.auswahl2}" />
                                                        </h:commandLink>
                                                    </li>

                                                    <li class="action-intent-li">
                                                        <!-- Download-Schaltknopf für Page-->
                                                        <h:commandLink action="#{ProzessverwaltungForm.DownloadToHomePage}" title="#{msgs.trefferDieserSeite}" onclick="if (!confirm('#{msgs.download}')) return false" id="downloadToHomePage">
                                                            <span class="btn margin-right-10 fa fa-angle-right" />
                                                            <h:outputText value="#{msgs.trefferDieserSeite}" />
                                                        </h:commandLink>
                                                    </li>
                                                    <li class="action-intent-li">
                                                        <!-- Download-Schaltknopf für gesamtes Trefferset -->
                                                        <h:commandLink action="#{ProzessverwaltungForm.DownloadToHomeHits}" title="#{msgs.gesamtesTrefferset}" onclick="if (!confirm('#{msgs.download}')) return false" id="downloadToHomeAll">
                                                            <span class="btn margin-right-10 fa fa-angle-right" />
                                                            <h:outputText value="#{msgs.gesamtesTrefferset}" />
                                                        </h:commandLink>
                                                    </li>
                                                </ul>

                                            </li>
                                        </h:panelGroup>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{LoginForm.hasRole('Workflow_Processes_Allow_Export') and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <li class="action-li">
                                            <h:commandLink id="expandbutton2" onclick="toggle('possibleActions2')">
                                                <span class="btn btn-lightgrey margin-right-10 fa fa-globe fa-lg width-40" />
                                                <h:outputText value="#{msgs.metadatenFuerDMSExportieren}" />
                                                <f:ajax render="expandbutton2" />
                                            </h:commandLink>
                                            <ul id="possibleActions2" style="display: none" class="action-intent-ul">

                                                <li class="action-intent-li">
                                                    <!-- TODO: delete this warning once the root cause of the timeout problem is solved  -->
                                                    <h:outputText styleClass="alert alert-warning alert-dismissable margin-bottom-10" value="#{msgs.timeoutWarningDMS}" />
                                                </li>

                                                <li class="action-intent-li">
                                                    <!-- Download-Schaltknopf für Selection-->
                                                    <h:commandLink id="action6" action="#{ProzessverwaltungForm.ExportDMSSelection}" rendered="#{ProzessverwaltungForm.anzeigeAnpassen['selectionBoxes']}" title="#{msgs.auswahl2}" onclick="if (!confirm('#{msgs.process_sureToDoMassExport}')) return false">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.auswahl2}" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- Download-Schaltknopf für Page-->
                                                    <h:commandLink action="#{ProzessverwaltungForm.ExportDMSPage}" title="#{msgs.trefferDieserSeite}" id="action7" onclick="if (!confirm('#{msgs.process_sureToDoMassExport}')) return false">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.trefferDieserSeite}" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- Download-Schaltknopf für gesamtes Trefferset -->
                                                    <h:commandLink action="#{ProzessverwaltungForm.ExportDMSHits}" title="#{msgs.gesamtesTrefferset}" id="action8" onclick="if (!confirm('#{msgs.process_sureToDoMassExport}')) return false">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.gesamtesTrefferset}" />
                                                    </h:commandLink>
                                                </li>
                                            </ul>
                                        </li>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{LoginForm.hasRole('Workflow_Processes_Allow_GoobiScript') and ProzessverwaltungForm.modusAnzeige=='aktuell'  and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <h:messages for="goobiScriptfield" escape="false" errorClass="alert alert-danger" infoClass="alert alert-info" warnClass="alert" showDetail="true" showSummary="true" tooltip="true" styleClass="messages" />
                                        <h:messages for="goobiScriptPopup" escape="false" errorClass="alert alert-danger" infoClass="alert alert-info" warnClass="alert" styleClass="messages" />
                                        <li class="action-li">
                                            <h:commandLink id="expandbutton5" action="#{NavigationForm.Reload}">
                                                <span class="btn btn-lightgrey margin-right-10 fa fa-cogs fa-lg width-40" />
                                                <h:outputText value="#{msgs.goobiScriptAusfuehren}" />
                                                <f:setPropertyActionListener value="#{NavigationForm.uiStatus.goobiScript eq 'true' ? 'false' : 'true'}" 
                                                	target="#{NavigationForm.uiStatus.goobiScript}"/>
                                            </h:commandLink>
											
											<ui:fragment rendered="#{NavigationForm.uiStatus.goobiScript eq 'true'}">
                                            <ul id="possibleActions5" class="action-intent-ul">
                                                <li class="action-intent-li">
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:addPluginToStep &quot;steptitle:TITLE_STEP&quot; plugin:PLUGIN_NAME')">addPluginToStep</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:addShellScriptToStep &quot;steptitle:TITLE_STEP&quot; &quot;label:LABEL_FOR_SCRIPT&quot; &quot;script:PATH_TO_SCRIPT&quot;')">addShellScriptToStep</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:addStep &quot;steptitle:TITLE_STEP&quot; number:NUMBER_1_TO_?')">addStep</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:addToProcessLog type:debug_info_warn_error_user &quot;message:YOUR_MESSAGE&quot;')">addToProcessLog</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:addUser &quot;steptitle:TITLE_STEP&quot; username:USER_NAME')">addUser</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:addUserGroup &quot;steptitle:TITLE_STEP&quot; group:GROUP_NAME')">addUserGroup</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:changeProcessTemplate templateName:TITLE')">changeProcessTemplate</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:deleteStep &quot;steptitle:TITLE_STEP&quot;')">deleteStep</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:deleteUserGroup &quot;steptitle:TITLE_STEP&quot; group:GROUP_NAME')">deleteUserGroup</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:executeStepAndUpdateStatus &quot;steptitle:TITLE_STEP&quot;')">executeStepAndUpdateStatus</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:export exportImages:false exportOcr:false')">export</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:exportDatabaseInformation')">exportDatabaseInformation</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:importFromFileSystem sourcefolder:SOURCE_FOLDER')">importFromFileSystem</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:metadataAdd field:MY_METADATA_FIELD value:MY_VALUE position:top_OR_child_OR_work_OR_any ignoreErrors:true_OR_false')">metadataAdd</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:metadataChangeType oldType:TYPE_TO_CHANGE newType:NEW_TYPE position:top_OR_child_OR_work_OR_any ignoreErrors:true_OR_false')">metadataChangeType</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:metadataChangeValue field:MY_METADATA_FIELD &quot;prefix:MY_PREFIX&quot; &quot;suffix:MY_SUFFIX&quot; position:top_OR_child_OR_work_OR_any &quot;condition:MY_OPTIONAL_VALUE_THAT_SHOULD_BE_PRESENT&quot;')">metadataChangeValue</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:metadataDelete field:MY_METADATA_FIELD value:MY_VALUE position:top_OR_child_OR_work_OR_any ignoreValue:true_OR_false_USE_IF_CURRENT_VALUE_SHALL_BE_IGNORED')">metadataDelete</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:metadataReplace field:MY_METADATA_FIELD search:OLD_VALUE replace:NEW_VALUE position:top_OR_child_OR_work_OR_any regularExpression:true_OR_false')">metadataReplace</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:moveWorkflowBackward')">moveWorkflowBackward</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:moveWorkflowForward')">moveWorkflowForward</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:propertyDelete name:PROPERTY_TITLE')">propertyDelete</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:propertySet name:PROPERTY_TITLE value:MY_VALUE')">propertySet</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:renameProcess search:OLDNAME replace:NEWNAME type:contains|full')">renameProcess</span>                                                
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:renameStep oldStepName:OLDNAME newStepName:NEWNAME')">renameStep</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:runPlugin &quot;steptitle:TITLE_STEP&quot;')">runPlugin</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:runScript &quot;steptitle:TITLE_STEP&quot; script:SPECIFIC_SCRIPT')">runScript</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:setPriority &quot;priority:standard_high_higher_highest_correction&quot; &quot;steptitle:TITLE_STEP&quot;')">setPriority</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:setProject &quot;project:TITLE_PROJECT&quot;')">setProject</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:setRuleset &quot;ruleset:TITLE_RULESET&quot;')">setRuleset</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:setStepStatus &quot;steptitle:TITLE_STEP&quot; status:NUMBER_0_TO_5')">setStepStatus</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:setStepNumber &quot;steptitle:TITLE_STEP&quot; number:NUMBER_1_TO_?')">setStepNumber</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:setTaskProperty &quot;steptitle:TITLE_STEP&quot; property:metadata_readimages_writeimages_validate_exportdms_automatic_batch_importfileupload_acceptandclose_acceptmoduleandclose_script_delay_updatemetadataindex_generatedocket value:true_OR_false')">setTaskProperty</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:swapSteps swap1nr:ORDER_NUMBER_FIRST_STEP &quot;swap1title:TITLE_FIRST_STEP&quot; swap2nr:ORDER_NUMBER_SECOND_STEP &quot;swap2title:TITLE_SECOND_STEP&quot;')">swapSteps</span>
                                                    <span class="badge badge-intranda-light pointer" onclick="myCodeMirror.doc.setValue('action:updateDatabaseCache')">updateDatabaseCache</span>

<br/>
<br/>

<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('#{ProzessverwaltungForm.getGoobiScriptCall('GoobiScriptAddPluginToStep')}')">
	addPluginToStep
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: addShellScriptToStep\nsteptitle: TITLE_STEP\nlabel: LABEL_FOR_SCRIPT\nscript: PATH_TO_SCRIPT')">
	addShellScriptToStep
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: addStep\nsteptitle: TITLE_STEP\nnumber: NUMBER_1_TO_?')">
	addStep
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: addToProcessLog\ntype: debug_info_warn_error_user\nmessage: YOUR_MESSAGE')">
	addToProcessLog
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: addUser\nsteptitle: TITLE_STEP\nusername: USER_NAME')">
	addUser
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: addUserGroup\nsteptitle: TITLE_STEP\ngroup: GROUP_NAME')">
	addUserGroup
</span>
<span class="badge badge-intranda-light pointer"
	onclick="myCodeMirror.doc.setValue('---\naction: changeProcessTemplate\ntemplateName: TITLE')">
	changeProcessTemplate
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: deleteStep\nsteptitle: TITLE_STEP')">
	deleteStep
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: deleteUserGroup\nsteptitle: TITLE_STEP\ngroup: GROUP_NAME')">
	deleteUserGroup
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: executeStepAndUpdateStatus\nsteptitle: TITLE_STEP')">
	executeStepAndUpdateStatus
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: export\nexportImages: false\nexportOcr: false')">
	export
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: exportDatabaseInformation')">
	exportDatabaseInformation
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: importFromFileSystem\nsourcefolder: SOURCE_FOLDER')">
	importFromFileSystem
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: metadataAdd\nfield: MY_METADATA_FIELD\nvalue: MY_VALUE\nposition: top_OR_child_OR_work_OR_any\nignoreErrors: true_OR_false')">
	metadataAdd
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: metadataChangeType\noldType: TYPE_TO_CHANGE\nnewType: NEW_TYPE\nposition: top_OR_child_OR_work_OR_any\nignoreErrors: true_OR_false')">
	metadataChangeType
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: metadataChangeValue\nfield: MY_METADATA_FIELD\nprefix: MY_PREFIX\nsuffix: MY_SUFFIX\nposition: top_OR_child_OR_work_OR_any\ncondition: MY_OPTIONAL_VALUE_THAT_SHOULD_BE_PRESENT')">
	metadataChangeValue
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: metadataDelete\nfield: MY_METADATA_FIELD\nvalue: MY_VALUE\nposition: top_OR_child_OR_work_OR_any\nignoreValue: true_OR_false_USE_IF_CURRENT_VALUE_SHALL_BE_IGNORED')">
	metadataDelete
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: metadataReplace\nfield: MY_METADATA_FIELD\nsearch: OLD_VALUE\nreplace: NEW_VALUE\nposition: top_OR_child_OR_work_OR_any\nregularExpression: true_OR_false')">
	metadataReplace
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: moveWorkflowBackward')">
	moveWorkflowBackward
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: moveWorkflowForward')">
	moveWorkflowForward
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: propertyDelete\nname: PROPERTY_TITLE')">
	propertyDelete
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: propertySet\nname: PROPERTY_TITLE\nvalue: MY_VALUE')">
	propertySet
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: renameProcess\nsearch: OLDNAME\nreplace: NEWNAME\ntype: contains|full')">
	renameProcess
</span>                                                
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: renameStep\noldStepName: OLDNAME\nnewStepName: NEWNAME')">
	renameStep
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: runPlugin\nsteptitle: TITLE_STEP')">
	runPlugin
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: runScript\nsteptitle: TITLE_STEP\nscript: SPECIFIC_SCRIPT')">
	runScript
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: setPriority\npriority: standard_high_higher_highest_correction\nsteptitle: TITLE_STEP')">
	setPriority
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: setProject\nproject: TITLE_PROJECT')">
	setProject
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: setRuleset\nruleset: TITLE_RULESET')">
	setRuleset
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: setStepStatus\nsteptitle: TITLE_STEP\nstatus: NUMBER_0_TO_5')">
	setStepStatus
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: setStepNumber\nsteptitle: TITLE_STEP\nnumber: NUMBER_1_TO_?')">
	setStepNumber
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: setTaskProperty\nsteptitle: TITLE_STEP\nproperty: metadata_readimages_writeimages_validate_exportdms_automatic_batch_importfileupload_acceptandclose_acceptmoduleandclose_script_delay_updatemetadataindex_generatedocket\nvalue: true_OR_false')">
	setTaskProperty
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---
\naction:     swapSteps
\n# this is a comment
\nswap1nr:    ORDER_NUMBER_FIRST_STEP
\n# this is a comment
\nswap1title: TITLE_FIRST_STEP
\n# this is a comment
\nswap2nr:    ORDER_NUMBER_SECOND_STEP
\n# this is a comment
\nswap2title: TITLE_SECOND_STEP')">
	swapSteps
</span>
<span class="badge badge-intranda-light pointer" 
	onclick="myCodeMirror.doc.setValue('---\naction: updateDatabaseCache')">
	updateDatabaseCache
</span>




                                                    
                                                </li>
                                                <li class="action-intent-li">
                                                    <x:inputTextarea id="goobiScriptfield" pt:aria-label="goobiScriptfield" forceId="true" styleClass="form-control" value="#{ProzessverwaltungForm.goobiScript}" />
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- GoobiScript für selektierte Treffer der Seite -->
                                                    <ui:fragment rendered="#{ProzessverwaltungForm.anzeigeAnpassen['selectionBoxes']}">
	                                                    <!-- GoobiScript für selektierte Treffer der Seite - modal rendern  -->
	                                                    <h:commandLink styleClass="text_head" action="#{ProzessverwaltungForm.prepareGoobiScriptSelection}" pt:data-modalid="goobiScriptModal">
	                                                    	<f:ajax render="goobiScriptModalWrapper" execute="goobiScriptfield" onevent="renderModal"/>
	                                                    	<span class="btn margin-right-10 fa fa-angle-right" />
	                                                       <h:outputText value="#{msgs.auswahl2}" />
	                                                    </h:commandLink>
                                                    </ui:fragment>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- GoobiScript für Treffer der Seite - modal rendern  -->
                                                    <h:commandLink styleClass="text_head" action="#{ProzessverwaltungForm.prepareGoobiScriptPage}" pt:data-modalid="goobiScriptModal">
                                                    	<f:ajax render="goobiScriptModalWrapper" execute="goobiScriptfield" onevent="renderModal"/>
                                                    	<span class="btn margin-right-10 fa fa-angle-right" />
                                                      		<h:outputText value="#{msgs.trefferDieserSeite}" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- GoobiScript für alle Treffer - modal rendern  -->
                                                    <h:commandLink styleClass="text_head" action="#{ProzessverwaltungForm.prepareGoobiScriptHits}" pt:data-modalid="goobiScriptModal">
                                                    	<f:ajax render="goobiScriptModalWrapper" execute="goobiScriptfield" onevent="renderModal"/>
                                                    	<span class="btn margin-right-10 fa fa-angle-right" />
                                                      		<h:outputText value="#{msgs.gesamtesTrefferset}" />
                                                    </h:commandLink>
			                                    </li>
                                            </ul>
											</ui:fragment>

                                        </li>

                                    </h:panelGroup>
                                    
                                    
                                    
                                    

                                    <h:panelGroup rendered="#{LoginForm.hasRole('Workflow_Processes_Allow_Download') and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <li class="action-li">
                                            <h:commandLink id="expandbutton10">
                                                <span class="btn btn-lightgrey margin-right-10 fa fa-floppy-o fa-lg width-40" />
                                                <h:outputText value="#{msgs.saveSearchResult}" />
                                                <f:setPropertyActionListener target="#{ProzessverwaltungForm.dispaySearchResult}" value="#{not ProzessverwaltungForm.dispaySearchResult}" />
                                                <f:ajax render="@form" />
                                            </h:commandLink>

                                            <h:panelGroup rendered="#{ProzessverwaltungForm.dispaySearchResult}">
                                                <ul id="possibleActions10" class="action-intent-ul">
                                                    <li class="action-intent-li">

                                                        <x:dataTable value="#{ProzessverwaltungForm.searchField}" var="field" rowIndexVar="id">

                                                            <h:column>
                                                                <h:outputText value="#{msgs.column} #{id +1}:" styleClass="margin-right-5 margin-bottom-regular" />
                                                            </h:column>

                                                            <h:column>
                                                                <h:selectOneMenu pt:aria-label="#{msgs.auswahl2}" value="#{field.value}" styleClass="form-control margin-bottom-regular">
                                                                    <f:selectItems value="#{ProzessverwaltungForm.possibleItems}" var="item" itemDisabled="#{item.disabled}" itemLabel="#{item.label}" itemValue="#{item.value}" />
                                                                </h:selectOneMenu>
                                                            </h:column>
                                                            <h:column>
                                                                <h:commandLink pt:aria-label="#{msgs.addFilter}" action="#{ProzessverwaltungForm.addField}">
                                                                    <span class="btn margin-left-5 fa fa-plus margin-bottom-regular" />
                                                                    <f:ajax render="@form" execute="@form" />
                                                                </h:commandLink>

                                                                <h:commandLink pt:aria-label="#{msgs.removeFilter}" action="#{ProzessverwaltungForm.deleteField}" rendered="#{ProzessverwaltungForm.sizeOfFieldList > 1}">
                                                                    <span class="btn fa fa-minus margin-bottom-regular" />
                                                                    <x:updateActionListener property="#{ProzessverwaltungForm.currentField}" value="#{field}" />
                                                                    <f:ajax render="@form" execute="@form" />
                                                                </h:commandLink>
                                                            </h:column>

                                                        </x:dataTable>

                                                    </li>


                                                    <li class="action-intent-li">
                                                        <h:commandLink action="#{ProzessverwaltungForm.generateResultXls}" title="#{msgs.createExcel}" rendered="#{ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                                            <span class="btn margin-right-10 fa fa-floppy-o" />
                                                            <h:outputText value="#{msgs.createExcel}" />
                                                        </h:commandLink>
                                                    </li>



                                                    <li class="action-intent-li">
                                                        <h:commandLink action="#{ProzessverwaltungForm.generateResultDoc}" title="#{msgs.createDoc}" rendered="#{ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                                            <span class="btn margin-right-10 fa fa-floppy-o" />
                                                            <h:outputText value="#{msgs.createDoc}" />
                                                        </h:commandLink>
                                                    </li>


                                                    <li class="action-intent-li">
                                                        <h:commandLink action="#{ProzessverwaltungForm.generateResultRtf}" title="#{msgs.createRtf}" rendered="#{ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                                            <span class="btn margin-right-10 fa fa-floppy-o" />
                                                            <h:outputText value="#{msgs.createRtf}" />
                                                        </h:commandLink>
                                                    </li>

                                                    <li class="action-intent-li">
                                                        <h:commandLink action="#{ProzessverwaltungForm.generateResultAsPdf}" title="#{msgs.createPdf}" rendered="#{ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                                            <span class="btn margin-right-10 fa fa-floppy-o" />
                                                            <h:outputText value="#{msgs.createPdf}" />
                                                        </h:commandLink>
                                                    </li>
                                                </ul>
                                            </h:panelGroup>

                                        </li>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{LoginForm.hasRole('Statistics_General') and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <li class="action-li">
                                            <h:commandLink id="expandbutton6" onclick="toggle('possibleActions6')">
                                                <span class="btn btn-lightgrey margin-right-10 fa fa-table fa-lg width-40" />
                                                <h:outputText value="#{msgs.anzahlMetadatenUndImagesErmitteln}" />
                                                <f:ajax render="expandbutton6" />
                                            </h:commandLink>

                                            <ul id="possibleActions6" style="display: none" class="action-intent-ul">
                                                <li class="action-intent-li">
                                                    <!-- Statistische Auswertung-Schaltknopf für Page-->
                                                    <h:commandLink id="action20" action="#{ProzessverwaltungForm.CalcMetadataAndImagesSelection}" rendered="#{ProzessverwaltungForm.anzeigeAnpassen['selectionBoxes']}" title="#{msgs.auswahl2}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.auswahl2}" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- Statistische Auswertung-Schaltknopf für Page-->
                                                    <h:commandLink id="action21" action="#{ProzessverwaltungForm.CalcMetadataAndImagesPage}" title="#{msgs.trefferDieserSeite}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.trefferDieserSeite}" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- Statistische Auswertung-Schaltknopf für gesamtes Trefferset -->
                                                    <h:commandLink id="action22" action="#{ProzessverwaltungForm.CalcMetadataAndImagesHits}" title="#{msgs.gesamtesTrefferset}" onclick="if (!confirm('#{msgs.wirklichAusfuehren}')) return false">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.gesamtesTrefferset}" />
                                                    </h:commandLink>
                                                </li>
                                            </ul>
                                        </li>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{LoginForm.hasRole('Statistics_General') and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <li class="action-li">
                                            <h:commandLink id="expandbutton7" onclick="toggle('possibleActions7')">
                                                <span class="btn btn-lightgrey margin-right-10 fa fa-bar-chart-o fa-lg width-40" />
                                                <h:outputText value="#{msgs.statistischeAuswertung}" />
                                                <f:ajax render="expandbutton7" />
                                            </h:commandLink>

                                            <ul id="possibleActions7" style="display: none" class="action-intent-ul">
                                                <li class="action-intent-li">
                                                    <!-- StatisticsStatusVolumes-->
                                                    <h:commandLink id="action30" rendered="#{!HelperForm.anonymized}" action="#{ProzessverwaltungForm.StatisticsStatusVolumes}" title="#{msgs.statusOfVolumes}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.statusOfVolumes}" />
                                                        <x:updateActionListener property="#{ProzessverwaltungForm.showStatistics}" value="true" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- StatisticsUsergroups -->
                                                    <h:commandLink id="action31" rendered="#{!HelperForm.anonymized}" action="#{ProzessverwaltungForm.StatisticsUsergroups}" title="#{msgs.statusForUsers}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.statusForUsers}" />
                                                        <x:updateActionListener property="#{ProzessverwaltungForm.showStatistics}" value="true" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- StatisticsRuntimeSteps -->
                                                    <h:commandLink id="action32" rendered="#{!HelperForm.anonymized and ProzessverwaltungForm.paginator.totalResults lt 300}" action="#{ProzessverwaltungForm.StatisticsRuntimeSteps}" title="#{msgs.runtimeOfSteps}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.runtimeOfSteps}" />
                                                        <x:updateActionListener property="#{ProzessverwaltungForm.showStatistics}" value="true" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- StatisticsProduction -->
                                                    <h:commandLink id="action33" rendered="#{!HelperForm.anonymized}" action="#{ProzessverwaltungForm.StatisticsProduction}" title="#{msgs.productionStatistics}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.productionStatistics}" />
                                                        <x:updateActionListener property="#{ProzessverwaltungForm.showStatistics}" value="true" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- StatisticsTroughput -->
                                                    <h:commandLink id="action34" rendered="#{!HelperForm.anonymized}" action="#{ProzessverwaltungForm.StatisticsTroughput}" title="#{msgs.productionThroughput}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.productionThroughput}" />
                                                        <x:updateActionListener property="#{ProzessverwaltungForm.showStatistics}" value="true" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- StatisticsStorage -->
                                                    <h:commandLink id="action35" action="#{ProzessverwaltungForm.StatisticsStorage}" title="#{msgs.storageCalculator}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.storageCalculator}" />
                                                        <x:updateActionListener property="#{ProzessverwaltungForm.showStatistics}" value="true" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- StatisticsCorrection -->
                                                    <h:commandLink id="action36" rendered="#{!HelperForm.anonymized}" action="#{ProzessverwaltungForm.StatisticsCorrection}" title="#{msgs.errorTracking}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.errorTracking}" />
                                                        <x:updateActionListener property="#{ProzessverwaltungForm.showStatistics}" value="true" />
                                                    </h:commandLink>
                                                </li>
                                                <li class="action-intent-li">
                                                    <!-- ProjectAssociationss -->
                                                    <h:commandLink id="action37" action="#{ProzessverwaltungForm.StatisticsProject}" title="#{msgs.projectAssociation}">
                                                        <span class="btn margin-right-10 fa fa-angle-right" />
                                                        <h:outputText value="#{msgs.projectAssociation}" />
                                                        <x:updateActionListener property="#{ProzessverwaltungForm.showStatistics}" value="true" />
                                                    </h:commandLink>
                                                </li>
                                            </ul>
                                        </li>
                                    </h:panelGroup>

                                </ul>
<!--                             </h:form> -->
                            
                            <h:panelGroup id="goobiScriptModalWrapper" prependId="false" rendered="#{LoginForm.hasRole('Workflow_Processes_Allow_GoobiScript') and ProzessverwaltungForm.modusAnzeige=='aktuell'  and ProzessverwaltungForm.paginator.totalResults > 0 }">
	                            <h:panelGroup styleClass="modal fade" layout="block" id="goobiScriptModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		                            <div class="modal-dialog" role="document">
		                                <div class="modal-content">
		                                    <div class="modal-header">
		
		                                        <a href="#" class="btn btn-blue pull-right" title="#{msgs.cancel}" data-dismiss="modal">
		                                            <i class="fa fa-times"></i>
		                                        </a>
		                                        <h4 class="modal-title" id="myModalLabel">
		                                            <h:outputText value="GoobiScript" />
		                                        </h4>
		                                    </div>
		                                    <div class="modal-body">
		                                    	<div class="text-center" style="border: 2px solid red;">
		                                    		<img src="#{ProzessverwaltungForm.goobiScriptHitsImage}" style="height: 32px;"></img>
		                                    	</div><br />
		                                    	<p>#{msgs.youWantToExecuteGoobiScript}</p> 
		                                    	<pre>#{ProzessverwaltungForm.goobiScript}</pre><br/>
		                                    	<p>#{msgs.pleaseEnterNumberOfProcesses}</p>
		                                        <h:inputText id="goobiScriptPopup" styleClass="form-control" value="#{ProzessverwaltungForm.goobiScriptHitsCountUser}" validatorMessage="#{msgs.GoobiScript_input_not_valid}" onkeydown="clickOnEnter(event)" pt:data-onenterbutton="goobiScriptConfirmButton">
<!-- 		                                        	<f:validateLongRange minimum="1" maximum="1000"/> -->
		                                        </h:inputText>
		                                    </div>
		                                    <div class="modal-footer">
		
												<a class="btn pull-left" title="#{msgs.cancel}" data-dismiss="modal">
		                                            <h:outputText value="#{msgs.cancel}" />
		                                        </a>
		                                        
		                                        <h:commandLink action="#{ProzessverwaltungForm.runGoobiScript}" id="goobiScriptConfirmButton" title="#{msgs.goobiScriptAusfuehren}" rel="tooltip" styleClass="btn btn-red" onclick="preventDoubleSubmit(this);">
		                                            <i class="fa fa-cogs margin-right-10"></i>
		                                            <h:outputText value="#{msgs.goobiScriptAusfuehren} " />
		                                        </h:commandLink>
		
		                                    </div>
		                                </div>
		                            </div>
		                        </h:panelGroup>
	                        
                        	</h:panelGroup>
                            </h:form>
                        </div>
                    </div>

                </div>
            </div>
        </h:panelGroup>

    </composite:implementation>

</ui:composition>


