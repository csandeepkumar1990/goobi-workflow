<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite" 
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core" 
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:p="http://primefaces.org/ui">

    <composite:interface />

    <composite:implementation>
        <h:form id="metseditorPaginationForm" prependId="false">
            <div class="row">
                <!-- SELECT PAGES -->
                <div id="pagLeft" class="col-5 pagination__left">
                    <div id="meSelectPagesBox" class="module module__box module__box--white module__box--collapsable">
                        <div class="module__box-title">
                            <h3>
                                <i class="fa fa-bars" aria-hidden="true"></i>
                                <span>#{msgs.auswahlDerSeiten}</span>
                                <button type="button" class="btn btn--clean" data-toggle="box-body">
                                    <i class="fa fa-angle-up" aria-hidden="true"></i>
                                </button>
                            </h3>
                            <div class="module__box-title-actions">
                                <h:commandLink 
                                    id="readPagination"
                                    styleClass="btn btn--clean"
                                    action="#{Metadaten.createPagination}" 
                                    title="#{msgs.paginierungEinlesen}">
                                    <i class="fa fa-refresh"></i>
                                </h:commandLink>
                            </div>
                        </div>
                        <div class="module__box-body">
                            <h:selectManyCheckbox 
                                layout="pageDirection" 
                                id="myCheckboxes"
                                value="#{Metadaten.alleSeitenAuswahl}">
                                <f:selectItems value="#{Metadaten.alleSeiten}" id="myCheckbox" />
                                <f:ajax execute="@this" />
                            </h:selectManyCheckbox>
                        </div>
                    </div>
                </div>

                <!-- SET PAGINATION -->
                <div id="pagRight" class="col-7 pagination__right">
                    <div id="meSetPaginationBox" class="module module__box module__box--gray module__box--collapsable">
                        <div class="module__box-title">
                            <h3>
                                <i class="fa fa-bars" aria-hidden="true"></i>
                                <span>#{msgs.paginierungFestlegen}</span>
                                <button type="button" class="btn btn--clean" data-toggle="box-body">
                                    <i class="fa fa-angle-up" aria-hidden="true"></i>
                                </button>
                            </h3>
                            <div class="module__box-title-actions">
                                <div class="btn-group" role="group">
                                    <button
                                        type="button"
                                        id="paginationPagesPerImageGroup" 
                                        class="btn btn--icon dropdown-toggle"
                                        data-toggle="dropdown"
                                        aria-haspopup="true" 
                                        aria-expanded="false">
                                        <i class="fa fa-list"></i>
                                        #{Metadaten.paginierungSeitenProImage}
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="paginationPagesPerImageGroup">
                                        <h:commandLink 
                                            id="seitenzaehlung" 
                                            styleClass="dropdown-item"
                                            action="#{NavigationForm.Reload}" 
                                            title="#{msgs.seitenzaehlung}">
                                            <h:outputText value="1 - #{msgs.seitenzaehlung}" />
                                            <x:updateActionListener property="#{Metadaten.paginierungSeitenProImage}" value="1" />
                                        </h:commandLink>
                                        <h:commandLink 
                                            id="spaltenzaehlung" 
                                            styleClass="dropdown-item"
                                            action="#{NavigationForm.Reload}" 
                                            title="#{msgs.spaltenzaehlung}">
                                            <h:outputText value="2 - #{msgs.spaltenzaehlung}" />
                                            <x:updateActionListener property="#{Metadaten.paginierungSeitenProImage}" value="2" />
                                        </h:commandLink>
                                        <h:commandLink 
                                            id="blattzaehlung" 
                                            styleClass="dropdown-item"
                                            action="#{NavigationForm.Reload}" 
                                            title="#{msgs.blattzaehlung}">
                                            <h:outputText value="3 - #{msgs.blattzaehlung}" />
                                            <x:updateActionListener property="#{Metadaten.paginierungSeitenProImage}" value="3" />
                                        </h:commandLink>
                                        <h:commandLink 
                                            id="blattzaehlungrectoverso" 
                                            styleClass="dropdown-item"
                                            action="#{NavigationForm.Reload}" 
                                            title="#{msgs.blattzaehlungrectoverso}">
                                            <h:outputText value="4 - #{msgs.blattzaehlungrectoverso}" />
                                            <x:updateActionListener property="#{Metadaten.paginierungSeitenProImage}" value="4" />
                                        </h:commandLink>
                                        <h:commandLink 
                                            id="seitenzaehlungrectoverso" 
                                            styleClass="dropdown-item"
                                            action="#{NavigationForm.Reload}" 
                                            title="#{msgs.seitenzaehlungrectoverso}">
                                            <h:outputText value="5 - #{msgs.seitenzaehlungrectoverso}" />
                                            <x:updateActionListener property="#{Metadaten.paginierungSeitenProImage}" value="5" />
                                        </h:commandLink>
                                        <h:commandLink 
                                            id="doublepages" 
                                            styleClass="dropdown-item"
                                            action="#{NavigationForm.Reload}" 
                                            title="#{msgs.doublepages}">
                                            <h:outputText value="6 - #{msgs.doublepages}" />
                                            <x:updateActionListener property="#{Metadaten.paginierungSeitenProImage}" value="6" />
                                        </h:commandLink>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="module__box-body">
                            <!-- LANGUAGE SELECT -->
                            <div class="form-group">
                                <label for="paginationType" class="sr-only">#{msgs.language}</label>
                                <div class="form-control form-control--select">
                                    <h:selectOneMenu 
                                        id="paginationType" 
                                        value="#{Metadaten.paginierungArt}"
                                        onchange="paginierungWertAnzeigen();">
                                        <f:selectItem itemValue="1" itemLabel="#{msgs.arabisch}" />
                                        <f:selectItem itemValue="2" itemLabel="#{msgs.roemisch}" />
                                        <f:selectItem itemValue="3" itemLabel="#{msgs.unnummeriert}" />
                                        <f:selectItem itemValue="6" itemLabel="#{msgs.paginationFreetext}" />
                                    </h:selectOneMenu>
                                </div>
                            </div>
                        
                            <!-- PAGINATION INPUT FIELDS -->
                            <div id="paginationInputFields" class="#{Metadaten.paginierungArt eq '3' ? 'hidden' : ''}">
                                <div class="form-group form-group--flex">
                                    <div class="row justify-content-between">
                                        <div class="col">
                                            <label for="paginationPrefix" class="sr-only">#{msgs.Prefix}</label>
                                            <x:inputText id="paginationPrefix" styleClass="form-control" value="#{Metadaten.paginationPrefix}">
                                                <f:passThroughAttribute name="placeholder" value="#{msgs.Prefix}" />
                                            </x:inputText>
                                        </div>
                                        <div class="col-4">
                                            <x:inputText 
                                                id="paginierungWert" 
                                                styleClass="form-control" 
                                                forceId="true"
                                                value="#{Metadaten.paginierungWert}" />
                                        </div>
                                        <div class="col">
                                            <label for="paginationSuffix" class="sr-only">#{msgs.Suffix}</label>
                                            <x:inputText 
                                                id="paginationSuffix" 
                                                styleClass="form-control" 
                                                value="#{Metadaten.paginationSuffix}">
                                                <f:passThroughAttribute name="placeholder" value="#{msgs.Suffix}" />
                                            </x:inputText>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- FICTITIOUS PAGINATION -->
                            <div class="form-check form-check--block">
                                <label for="checkboxFictitious">
                                    <h:selectBooleanCheckbox id="checkboxFictitious" value="#{Metadaten.fictitious}" />
                                    <span>
                                        <i class="fa fa-square-o" aria-hidden="true"></i>
                                        <i class="fa fa-check-square-o" aria-hidden="true"></i>
                                    </span>
                                    #{msgs.paginationFictitious}
                                </label>
                            </div>

                            <hr />
                        
                            <!-- PAGINATION ACTIONS -->
                            <ul class="clean pagination__right-actions">
                                <li>
                                    <h:commandLink 
                                        id="paginationSelection"
                                        styleClass="btn btn--icon" 
                                        action="#{Metadaten.Paginierung}"
                                        role="button">
                                        <i class="fa fa-file-o fa-lg" aria-hidden="true"></i>
                                        <span>#{msgs.nurDieMarkiertenSeiten}</span>
                                        <x:updateActionListener property="#{Metadaten.paginierungAbSeiteOderMarkierung}" value="2" />
                                        <f:ajax execute="@form" render="myCheckboxes" onevent="addPaginationButtons" />
                                    </h:commandLink>
                                </li>
                                <li>
                                    <h:commandLink 
                                        id="paginationAll"
                                        styleClass="btn btn--icon" 
                                        action="#{Metadaten.Paginierung}"
                                        role="button">
                                        <i class="fa fa-files-o fa-lg" aria-hidden="true"></i>
                                        <span>#{msgs.abDerErstenMarkiertenSeite}</span>
                                        <x:updateActionListener property="#{Metadaten.paginierungAbSeiteOderMarkierung}" value="1" />
                                        <f:ajax execute="@form" render="myCheckboxes" onevent="addPaginationButtons" />
                                    </h:commandLink>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- PAGE ORDER -->
                    <ui:fragment rendered="#{Metadaten.displayFileManipulation}">                    
                        <div id="mePageOrderBox" class="module module__box module__box--white module__box--collapsable">
                            <div class="module__box-title">
                                <h3>
                                    <i class="fa fa-bars" aria-hidden="true"></i>
                                    <span>#{msgs.pageOrder}</span>
                                    <button type="button" class="btn btn--clean" data-toggle="box-body">
                                        <i class="fa fa-angle-up" aria-hidden="true"></i>
                                    </button>
                                </h3>
                            </div>
                            <div class="module__box-body">
                                <ul class="clean pagination__right-actions">
                                    <li class="pagination__right-actions-steps">
                                        <h:commandLink 
                                            id="moveUp1"
                                            styleClass="btn btn--icon" 
                                            action="#{Metadaten.moveSelectedPages('up', 1)}"
                                            role="button">
                                            <i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i>
                                            <span>#{msgs.moveSeltectedPagesUp}</span>
                                            <f:ajax execute="@form" render="myCheckboxes" />
                                        </h:commandLink>

                                        <div class="pagination__right-actions-steps-numbers">
                                            <h:commandLink 
                                                id="moveUp10" 
                                                action="#{Metadaten.moveSelectedPages('up', 10)}">
                                                10
                                                <f:ajax execute="@form" render="myCheckboxes" />
                                            </h:commandLink>
                                            <h:commandLink 
                                                id="moveUp50" 
                                                action="#{Metadaten.moveSelectedPages('up', 50)}">
                                                50
                                                <f:ajax execute="@form" render="myCheckboxes" />
                                            </h:commandLink>
                                            <h:commandLink 
                                                id="moveUp100" 
                                                action="#{Metadaten.moveSelectedPages('up', 100)}">
                                                100
                                                <f:ajax execute="@form" render="myCheckboxes" />
                                            </h:commandLink>
                                        </div>

                                    </li>
                            
                                    <li class="pagination__right-actions-steps">
                                        <h:commandLink 
                                            id="moveDown1"
                                            styleClass="btn btn--icon" 
                                            action="#{Metadaten.moveSelectedPages('down', 1)}"
                                            role="button">
                                            <i class="fa fa-chevron-down fa-lg" aria-hidden="true"></i>
                                            <span>#{msgs.moveSeltectedPagesDown}</span>
                                            <f:ajax execute="@form" render="pageSelectBox" />
                                        </h:commandLink>

                                        <div class="pagination__right-actions-steps-numbers">
                                            <h:commandLink 
                                                id="moveDown10" 
                                                action="#{Metadaten.moveSelectedPages('down', 10)}">
                                                10
                                                <f:ajax execute="@form" render="myCheckboxes" />
                                            </h:commandLink>
                                            <h:commandLink 
                                                id="moveDown50" 
                                                action="#{Metadaten.moveSelectedPages('down', 50)}">
                                                50
                                                <f:ajax execute="@form" render="myCheckboxes" />
                                            </h:commandLink>
                                            <h:commandLink 
                                                id="moveDown100" 
                                                action="#{Metadaten.moveSelectedPages('down', 100)}">
                                                100
                                                <f:ajax execute="@form" render="myCheckboxes" />
                                            </h:commandLink>
                                        </div>

                                    </li>
                                    <li>
                                        <h:commandLink 
                                            id="deletePages"
                                            styleClass="btn btn--icon" 
                                            action="#{Metadaten.deleteSeltectedPages}"
                                            onclick="if (!confirm('#{msgs.wirklichAusfuehren}')) return false"
                                            role="button">
                                            <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i>
                                            <span>#{msgs.deleteSeltectedPages}</span>
                                            <f:ajax execute="@form" render="@form :BildArea2" />
                                        </h:commandLink>
                                        
                                    </li>
                                    <li>
                                        <h:commandLink 
                                            id="reOrder" 
                                            styleClass="btn btn--icon" 
                                            action="#{Metadaten.reOrderPagination}" 
                                            onclick="displayProgressBar()"
                                            role="button">
                                            <i class="fa fa-refresh fa-lg" aria-hidden="true"></i>
                                            <span>#{msgs.reOrder}</span>
                                            <f:ajax execute="@form" render=":progressform :messages :BildArea2" />
                                        </h:commandLink>
                                    </li>                            
                                </ul>
                            </div>
                        </div>
                    </ui:fragment>
                </div>
            </div>
        </h:form>
    </composite:implementation>
</ui:composition>