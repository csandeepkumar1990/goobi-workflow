<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

    <composite:interface>
    </composite:interface>

    <composite:implementation>

        <!-- process search modal #processesSearchBox -->
        <div
            id="altoEditBox"
            class="modal fade modal__viaf"
            tabindex="-1"
            role="dialog"
            aria-hidden="true">
            <div
                class="modal-dialog xxl"
                role="document">
                <h:panelGroup id="altoEditorModalContent" class="modal-content" layout="block">
                    <div class="modal-header">
                        <h6
                            class="modal-title"
                            id="processesSearchBoxLabel">#{msgs.editAlto}</h6>

                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close">
                            <span aria-hidden="true">
                                <h:outputText
                                    value="&amp;times;"
                                    escape="false" />
                            </span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <alto-editor></alto-editor>
                    </div>
                    <h:inputText value="#{Metadaten.altoChanges}" id="altoChanges" style="display: none;"/>
                    <h:commandButton id="saveAltoChanges" action="#{Metadaten.saveAlto}" style="display: none;">
                        <f:ajax execute="altoChanges" render="" />
                    </h:commandButton>
                </h:panelGroup>


            </div>
        </div>
        <script>
        function openAltoEditor() {
        	$('#altoEditBox').modal('show');
        	var opts = {
        		language: "#{SpracheForm.locale.language}",
        		messages: {
        			save: '#{msgs.save}',
        			nextImage: '#{Metadaten.pagesRTL?msgs.previousImage:msgs.nextImage}',
        			prevImage: '#{Metadaten.pagesRTL?msgs.nextImage:msgs.previousImage}'
        		},
        		altoDivSelector: '#jsonAlto',
        		altoChangesInputSelector: "#altoChanges",
        		saveAltoButtonSelector: "#saveAltoChanges",
        		tileSourceSelector: '#tileSource'
        	}
        	riot.mount('alto-editor', opts)
        }
        </script>

    </composite:implementation>
</ui:composition>