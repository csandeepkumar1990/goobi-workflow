<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite" 
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core" 
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites" 
    xmlns:p="http://primefaces.org/ui">

    <composite:interface />

    <composite:implementation>
        <ui:fragment rendered="#{Metadaten.modusHinzufuegen}">
            <div id="meAddMetadataBox" class="module module__box module__box--gray module__box--collapsable">
                <div class="module__box-title">
                    <h3>
                        <i class="fa fa-bars" aria-hidden="true"></i>
                        <span>#{msgs.neuesMetadatumAnlegen}</span>
                        <button type="button" class="btn btn--clean" data-toggle="box-body">
                            <i class="fa fa-angle-up fa-lg" aria-hidden="true"></i>
                        </button>
                    </h3>
                </div>
                <div class="module__box-body">
                    <div class="form-group form-group--flex">
                        <div class="row justify-content-between">
                            <div class="col-3">
                                <label>#{msgs.typ}:</label>
                            </div>
                            <div class="col-9">
                                <div class="form-control form-control--select">
                                    <h:selectOneMenu 
                                        id="mytyp" 
                                        value="#{Metadaten.tempTyp}" 
                                        required="true">
                                        <f:selectItems value="#{Metadaten.addableMetadataTypes}" />
                                        <f:ajax event="valueChange" execute="@form" render="@form" />
                                    </h:selectOneMenu>
                                </div>
                            
                                <x:message for="mytyp" style="color: red" replaceIdWithLabel="true" />
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group form-group--flex">
                        <div class="row justify-content-between">
                            <div class="col-3">
                                <label>#{msgs.wert}:</label>
                            </div>
                            <div class="col-9">
                                <h:inputTextarea 
                                    id="myTextarea" 
                                    styleClass="form-control"
                                    value="#{Metadaten.metadatum.value}" 
                                    immediate="true"
                                    rendered="#{(Metadaten.outputType == 'textarea')}" 
                                    disabled="#{Metadaten.metadatum.plugin.disableMetadataField}">
                                </h:inputTextarea>
                                <h:inputText 
                                    id="myInput" 
                                    styleClass="form-control" 
                                    value="#{Metadaten.metadatum.value}"
                                    rendered="#{(Metadaten.outputType == 'input' or Metadaten.outputType == 'geonames' or Metadaten.outputType == 'gnd' or Metadaten.outputType == 'dante')}"
                                    disabled="#{Metadaten.metadatum.plugin.disableMetadataField}" />
                                <h:selectManyListbox    
                                    id="mySelect" 
                                    styleClass="form-control"
                                    value="#{Metadaten.metadatum.selectedItems}"
                                    rendered="#{(Metadaten.outputType == 'select')}" 
                                    immediate="true" 
                                    disabled="#{Metadaten.metadatum.plugin.disableMetadataField}">
                                    <f:selectItems value="#{Metadaten.metadatum.items}" />
                                </h:selectManyListbox>
                                <div class="form-control form-control--select">
                                    <h:selectOneMenu 
                                        id="mySelect1" 
                                        value="#{Metadaten.metadatum.selectedItem}"
                                        rendered="#{(Metadaten.outputType == 'select1')}" 
                                        immediate="true" 
                                        disabled="#{Metadaten.metadatum.plugin.disableMetadataField}">
                                        <f:selectItems value="#{Metadaten.metadatum.items}" />
                                    </h:selectOneMenu>
                                </div>
                                <h:outputText 
                                    id="myOutput" 
                                    value="#{Metadaten.metadatum.value}" 
                                    rendered="#{(Metadaten.outputType == 'readonly')}" />
                            </div>
                        </div>
                    </div>
                
                    <ui:fragment rendered="#{Metadaten.outputType == 'geonames' or Metadaten.outputType == 'gnd' or Metadaten.outputType == 'process'}">
                        <div class="form-group form-group--flex">
                            <div class="row justify-content-between">
                                <div class="col-3">
                                    <label>#{msgs.normdata}:</label>
                                </div>
                                <div class="col-9">
                                    <div class="row">
                                        <div class="col-5">
                                            <div class="form-control form-control--select">
                                                <h:selectOneMenu value="#{Metadaten.metadatum.normDatabase}">
                                                    <f:selectItems 
                                                        value="#{Metadaten.metadatum.possibleDatabases}" 
                                                        var="database" 
                                                        itemLabel="#{database}"
                                                        itemValue="#{database}" />
                                                    <f:ajax execute="@form" event="valueChange" />
                                                </h:selectOneMenu>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h:inputText id="normdataValue" styleClass="form-control" value="#{Metadaten.metadatum.normdataValue}">
                                                <f:ajax execute="@form" event="valueChange" />
                                            </h:inputText>
                                        </div>
                                
                                        <div class="col-1">
                                            <ui:fragment rendered="#{Metadaten.outputType == 'process'}">
                                                <button 
                                                    type="button" 
                                                    class="btn btn--icon"
                                                    title="#{msgs.search}"
                                                    data-toggle="modal" 
                                                    data-target="#processesSearchBox">
                                                    <i class="fa fa-search" aria-hidden="true"></i>
                                                </button>
                                            </ui:fragment>
                                            <ui:fragment rendered="#{Metadaten.outputType == 'geonames'}">
                                                <button 
                                                    type="button" 
                                                    class="btn btn--icon"
                                                    title="#{msgs.search}"
                                                    data-toggle="modal" 
                                                    data-target="#geonamesSearchBox">
                                                    <i class="fa fa-search" aria-hidden="true"></i>
                                                </button>
                                            </ui:fragment>
                                
                                            <ui:fragment rendered="#{Metadaten.outputType== 'gnd'}">
                                                <button 
                                                    type="button" 
                                                    class="btn btn--icon"
                                                    title="#{msgs.search}"
                                                    data-toggle="modal" 
                                                    data-target="#gndSearchBox">
                                                    <i class="fa fa-search" aria-hidden="true"></i>
                                                </button>
                                            </ui:fragment>                                
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ui:fragment>
                
                    <hr />

                    <div class="row">
                        <div class="col-auto mr-auto"></div>
                        <div class="col-auto">
                            <h:commandLink 
                                id="cancelMetadata" 
                                styleClass="btn btn--gray" 
                                action="#{Metadaten.Abbrechen}"
                                value="#{msgs.abbrechen}" 
                                immediate="false"
                                role="button">
                                <x:updateActionListener value="" property="#{Metadaten.metadatum.value}" />
                            </h:commandLink>
                            <h:commandButton 
                                id="absenden" 
                                styleClass="btn btn--gray" 
                                type="submit"
                                action="#{Metadaten.Speichern}" 
                                value="#{msgs.dieAenderungenSpeichern}"
                                role="button" />
                        </div>
                    </div>
                </div>
            </div>
        </ui:fragment>
    </composite:implementation>
</ui:composition>