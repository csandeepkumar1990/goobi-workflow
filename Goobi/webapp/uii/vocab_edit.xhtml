<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	template="/uii/template/template.html"
	xmlns:x="http://myfaces.apache.org/tomahawk"
	xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

	<ui:param name="myPageTitle" value="#{msgs.intranda_edit_vocabulary}" />

	<ui:define name="breadcrumb">
		<intranda:breadcrumb id="index"
			label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}"
			action="index" navId="a0" />
		<intranda:breadcrumb id="admin"
			label="#{msgs.intranda_administration_vocabulary}"
			action="administration_vocabulary.xhtml" />
		<intranda:breadcrumb id="edit"
			label="#{msgs.intranda_edit_vocabulary}" action="vocab_edit.xhtml"
			noSeparator="#{true}" />
	</ui:define>

	<ui:define name="info">
	</ui:define>

	<ui:define name="content">
		<script type="text/javascript">
			window.onload = function() {
				document.getElementById('titel').focus();
			}
		</script>
		<h:form id="myform" styleClass="form-horizontal form-bordered"
			onkeypress="submitOnEnter(event);"
			rendered="#{LoginForm.hasRole('Admin_Vocabulary')}">

			<div class="row">
				<div class="col-sm-12">
					<div class="box box-color orange box-bordered">
						<div class="box-title">
							<h3>
								<i class="fa fa-print box-icon-fix"></i>
								<h:outputText value="#{myPageTitle}" />
							</h3>
						</div>
						<div class="box-content nopadding">

							<intranda:formInputText id="title" name="title"
								label="Vokabular Name"
								field="#{VocabEditForm.vm.vocabulary.title}"
								fieldStyle="form-control" />

							<intranda:formInputText id="description" name="description"
								label="Beschreibung"
								field="#{VocabEditForm.vm.vocabulary.description}"
								fieldStyle="form-control" />

							<!-- Information about the definitions -->
							<h:dataTable
								styleClass="table table-hover dataTable table-bordered responsive"
								value="#{VocabEditForm.vm.definitions}" var="definition"
								style="margin-top:10px;">
								<h:column>
									<div class="input-group input-group">
										<f:facet name="header">
											<h:outputText value="#{msgs.plugin_admin_vocabulary_label}" />
										</f:facet>
										<h:inputText id="description" name="description"
											styleClass="form-control" value="#{definition.label}" />
										<div class="input-group-btn">
											<h:commandLink id="delete" styleClass="btn btn-danger"
												style="height:25px;margin-left:5px; border:0; padding-top:3px;"
												title="Definition lÃ¶schen"
												action="#{VocabEditForm.removeDef(definition)}"
												onclick="if (!confirm('#{msgs.wirklichAusfuehren}')) return false"
												immediate="true">
												<i class="fa fa-trash-o font-bold" style="color: white;"></i>
											</h:commandLink>
										</div>
									</div>
								</h:column>

								<h:column>
									<f:facet name="header">
										<h:outputText value="#{msgs.plugin_admin_vocabulary_type}" />
									</f:facet>
									<h:selectOneMenu value="#{definition.type}"
										styleClass="form-control" id="fieldname">
										<f:selectItems var="fieldname"
											value="#{VocabEditForm.defTypes}" itemValue="#{fieldname}"
											itemLabel="#{fieldname}" />
										<f:ajax render="@form" execute="@form" />
									</h:selectOneMenu>
								</h:column>

								<h:column>
									<f:facet name="header">
										<h:outputText
											value="#{msgs.plugin_admin_vocabulary_validation}" />
									</f:facet>
									<h:inputText value="#{definition.validation}"
										styleClass="form-control" />
								</h:column>
								<h:column>
									<f:facet name="header">
										<h:outputText value="#{msgs.plugin_admin_vocabulary_select}" />
									</f:facet>
									<h:inputText value="#{definition.select}"
										styleClass="form-control" />
								</h:column>
							</h:dataTable>

							<!-- new definition -->
							<h:commandLink id="new_def"
								styleClass="btn btn-primary font-size-s"
								style="margin-top:10px; margin-left:5px;"
								action="#{VocabEditForm.newDef}" title="Neues Feld">
								<i class="fa fa-plus"></i>
							</h:commandLink>

							<!-- Save -->
							<h:commandLink
								styleClass="btn btn-success submitOnEnter pull-right font-size-s margin-bottom-most"
								style="margin-top:10px; margin-left:5px;"
								id="absenden" type="submit" action="#{VocabEditForm.save()}">
								<i class="fa fa-save margin-right-5"></i>
								<h:outputText value="#{msgs.speichern}" />
							</h:commandLink>

							<!-- Cancel -->
							<h:commandLink
								styleClass="btn btn-cancel submitOnEnter pull-right font-size-s margin-bottom-most"
								style="margin-top:10px;" 
								id="abbrechen" type="cancel" action="#{VocabEditForm.cancel()}">
								<i class="fa fa-cancel margin-right-5"></i>
								<h:outputText value="#{msgs.abbrechen}" />
							</h:commandLink>

						</div>
					</div>
				</div>

			</div>
		</h:form>

	</ui:define>

</ui:composition>