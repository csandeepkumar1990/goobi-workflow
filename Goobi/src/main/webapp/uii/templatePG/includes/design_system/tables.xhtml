<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:x="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:intranda="http://xmlns.jcp.org/jsf/composite/compositesPG"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:jsf="http://xmlns.jcp.org/jsf">

	<composite:interface />

	<composite:implementation>


  <!-- TYPOGRAPHY -->

    <!-- HEADING STYLES -->
    <article class="tables" style="grid-column: 1 / 3">

      <h3 class="description">
        Table Search - Hits, Options, Searchbar
      </h3>

      <div class="gw-table">

        <!-- SEARCH -->
        <div class="gw-table__search">
          <div class="gw-table__search__length">
            <h:outputText value="#{msgs.treffer}: 499" />
          </div>

            <div class="gw-table__filters">
            <!-- SEARCH IN TABLE-->
            <h:form id="isActiveUsers">

              <!-- Show only active users -->
              <button jsf:id="tableUserAllShowActiveUsers"
                type="button"
                class="btn gw-table__filters__option"
                jsf:immediate="true">
                <i class="fa fa-square-o"></i>
                <h:outputText styleClass="font-size-s"
                  value="#{msgs.nurAktiveNutzerZeigen}" />
              </button>

            </h:form>


              <!-- Filter by search term -->
              <div class="gw-table__filters__search-bar">
              <h:form id="searchform" styleClass="search-form">
                <div class="input-group">
                  <span class="input-group-text"> <i
                    class="fa fa-search"></i>
                  </span>
                  <h:inputText id="searchfield"
                    styleClass="form-control searchfield"
                    value="Search inside of this table">
                    <f:passThroughAttribute name="placeholder"
                      value="#{msgs.benutzer}" />
                    <f:passThroughAttribute name="aria-label"
                      value="#{msgs.benutzer}" />
                  </h:inputText>
                  <button
                    type="button"
                    jsf:id="FilterAlle2"
                    jsf:forceId="true"
                    class="btn btn-blank"
                  >
                    #{msgs.search}
                  </button>
                </div>

                </h:form>
              </div> <!-- /gw-table__filtes__search-bar -->

            </div> <!-- /gw-table__filters -->
          </div> <!-- /gw-table__search -->

      </div> <!-- /gw-table -->


 <div class="accordion" id="accordionExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingOne">
      <button class="accordion-button btn btn-primary-400 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
        Code Snippet
      </button>
    </h2>
    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
      <div class="accordion-body">

<!-- Code block -->
<pre class="code--form-actions bg-primary text-white p-3" style="border-radius: var(--border-radius)">
<code class="microlight">
&lt;div class=&quot;gw-table&quot;&gt;
  &lt;!-- SEARCH --&gt;
  &lt;div class=&quot;gw-table__search&quot;&gt;
    &lt;div class=&quot;gw-table__search__length&quot;&gt;
      &lt;h:outputText value=&quot;#{msgs.treffer}: 499&quot; /&gt;
    &lt;/div&gt;
    &lt;div class=&quot;gw-table__filters&quot;&gt;

      &lt;!-- SEARCH FILTER OPTION--&gt;
      &lt;h:form id=&quot;isActiveUsers&quot;&gt;
        &lt;!-- SHOW ONLY ACTIVE USERS --&gt;
        &lt;button jsf:id=&quot;tableUserAllShowActiveUsers&quot;
          class=&quot;btn gw-table__filters__option&quot;
          jsf:action=&quot;&quot;
          jsf:immediate=&quot;true&quot;&gt;
          &lt;i class=&quot;fa fa-square-o&quot;&gt;&lt;/i&gt;
          &lt;h:outputText value=&quot;#{msgs.nurAktiveNutzerZeigen}&quot; /&gt;
        &lt;/button&gt;
      &lt;/h:form&gt;

      &lt;!-- SEARCHBAR --&gt;
      &lt;div class=&quot;gw-table__filters__search-bar&quot;&gt;
        &lt;h:form id=&quot;searchform&quot; styleClass=&quot;search-form&quot;&gt;
          &lt;div class=&quot;input-group&quot;&gt;
            &lt;span class=&quot;input-group-text&quot;&gt; &lt;i
              class=&quot;fa fa-search&quot;&gt;&lt;/i&gt;
            &lt;/span&gt;
            &lt;h:inputText id=&quot;searchfield&quot;
              styleClass=&quot;form-control searchfield&quot;
              value=&quot;Search in table&quot;&gt;
              &lt;f:passThroughAttribute name=&quot;placeholder&quot;
                value=&quot;#{msgs.benutzer}&quot; /&gt;
              &lt;f:passThroughAttribute name=&quot;aria-label&quot;
                value=&quot;#{msgs.benutzer}&quot; /&gt;
            &lt;/h:inputText&gt;
            &lt;button
              jsf:id=&quot;FilterAlle2&quot;
              jsf:forceId=&quot;true&quot;
              class=&quot;btn btn-blank&quot;
            &gt;
              #{msgs.search}
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/h:form&gt;
      &lt;/div&gt; &lt;!-- /gw-table__filtes__search-bar --&gt;

    &lt;/div&gt; &lt;!-- /gw-table__filters --&gt;
  &lt;/div&gt; &lt;!-- /gw-table__search --&gt;

&lt;/div&gt; &lt;!-- /gw-table --&gt;

</code>
</pre>


      </div>
    </div>
  </div>
</div> <!-- /accordion -->

    </article>



    <article class="tables" style="grid-column: 1 / 3">

      <h3 class="description">
        Table with min-width columns, width adjustable using a css prop: `--width-table-col`
      </h3>

							<div class="gw-table gw-table-fixed">

								<div class="gw-table__wrapper">

									<table role="grid" id="tableUserAll" class="table table-bordered table-fixed table-hover">

										<!-- COLUMNHEADER -->
										<thead>
											<tr role="row">
												<intranda:columnheader
														name="name"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.benutzer}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="login"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.login}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="location"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.standort}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="group"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.benutzergruppen}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="projects"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.projekte}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="institution"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.institution}"
														rendered="#{BenutzerverwaltungForm.getNumberOfInstitutions() gt 1}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														value="#{msgs.auswahl}"
														sortable="false"
														addClass="gw-table-fixed__actions"
												/>
											</tr>
										</thead>

										<!-- CONTENT ROWS -->
										<ui:repeat var="item"
											value="#{BenutzerverwaltungForm.paginator.list}"
											varStatus="status">
											<tr role="row">
												<td>
													<h:outputText
														value="#{item.nachname}, #{item.vorname}"
														styleClass="userID_#{item.vorname}_#{item.nachname} #{not item.active?'font-light':''}"
														title="#{item.login}" />
												</td>
												<td>
													<h:outputText value="#{item.login}"
														styleClass="#{not item.active?'font-light':''}" />
												</td>
												<td>
													<h:outputText value="#{item.standort}"
														styleClass="#{not item.active?'font-light':''}" />
												</td>
												<td>
													<x:dataList var="intern"
														styleClass="#{not item.active?'font-light':''}"
														rendered="#{item.benutzergruppenSize != 0}"
														value="#{item.benutzergruppen}" layout="ordered list"
														rowCountVar="rowCount" rowIndexVar="rowIndex">
														<h:outputText value="#{intern.titel}" />
														<h:outputText value=","
															rendered="#{rowIndex + 1 lt rowCount}" />
													</x:dataList>
												</td>
												<td>
													<x:dataList var="intern"
														styleClass="#{not item.active?'font-light':''}"
														rendered="#{item.projekteSize != 0}"
														value="#{item.projekte}" layout="ordered list"
														rowCountVar="rowCount" rowIndexVar="rowIndex">
														<h:outputText value="#{intern.titel}" />
														<h:outputText value=","
															rendered="#{rowIndex + 1 lt rowCount}" />
													</x:dataList>
												</td>
												<td jsf:rendered="#{BenutzerverwaltungForm.getNumberOfInstitutions() gt 1}">
													<h:outputText value="#{item.institution.shortName}"
														styleClass="#{not item.active?'font-light':''}" />
												</td>

												<!-- ACTION BUTTONS -->
												<td>
														<div class="gw-table__actions__container">

															<!-- Bearbeiten-Schaltknopf -->
															<button jsf:id="edit" class="btn btn-blank"
                                disabled="true"
																jsf:rel="tooltip" jsf:action="user_edit"
																title="#{msgs.benutzerBearbeiten}">
																<i class="fa fa-pencil"></i>
																<f:passThroughAttribute name="data-toggle"
																	value="tooltip" />
																<f:passThroughAttribute name="aria-label"
																	value="#{msgs.benutzerBearbeiten}" />
																<f:setPropertyActionListener
																	target="#{BenutzerverwaltungForm.myClass}"
																	value="#{item}" />
																<f:setPropertyActionListener
																	target="#{BenutzerverwaltungForm.displayMode}" value="" />
															</button>

															<!-- Benutzerprofil laden-Schaltknopf -->
															<button jsf:id="switch"
                                disabled="true"
																jsf:rendered="#{LoginForm.hasRole('Admin_Users_Allow_Switch')}"
																class="btn btn-blank"
																jsf:action="#{LoginForm.EinloggenAls}"
																title="#{msgs.benutzerprofilLaden}">
																<i class="fa fa-user-secret"></i>
																<f:passThroughAttribute name="aria-label"
																	value="#{msgs.benutzerprofilLaden}" />
																<f:passThroughAttribute name="data-toggle"
																	value="tooltip" />
																<f:passThroughAttribute name="data-placement" value="top" />
																<f:param name="ID" value="#{item.id}" />
															</button>

															<!-- Create new random password for user -->
															<button jsf:id="createNewRandomPassword"
                                disabled="true"
																class="btn btn-blank" jsf:rel="tooltip"
																title="#{msgs.createNewRandomPassword}"
																jsf:rendered="#{LoginForm.hasRole('Admin_Users_Change_Passwords') and (item.ldapGruppe.authenticationType != 'ldap' or not item.ldapGruppe.readonly)}"
																jsf:onclick="if (!confirm('#{msgs.confirmUserPasswordReset}')) return false"
																jsf:action="#{BenutzerverwaltungForm.createNewRandomPasswordForUser}">
																<i class="fa fa-key"></i>
																<f:passThroughAttribute name="data-toggle"
																	value="tooltip" />
																<f:setPropertyActionListener
																	target="#{BenutzerverwaltungForm.myClass}"
																	value="#{item}" />
																<f:passThroughAttribute name="aria-label"
																	value="#{msgs.createNewRandomPassword}" />
																<f:param name="ID" value="#{item.id}" />
																<f:ajax render="globalMessage" />
															</button>
													</div>
												</td>
											</tr>
										</ui:repeat>
									</table>
          </div>
				</div>

          <!-- Code block -->
          <div class="mt-4">
            <ui:include src="code_blocks/code_table.xhtml">
              <ui:param name="ID" value="codeTable" />
            </ui:include>
          </div>

    </article>

    <article style="grid-column: 1 / -1">
      <h3 class="description">
        Complete table in a box - with search and actions
      </h3>

					<intranda:box
						id="allUsers"
						boxType="primary"
						icon="fa-user"
						title="#{myPageTitle}"
						padding="true"
						>

							<div class="gw-table gw-table-fixed">

								<!-- SEARCH -->
								<div class="gw-table__search">
									<div class="gw-table__search__length">
										<h:outputText
											value="#{msgs.treffer}: #{BenutzerverwaltungForm.paginator.totalResults}" />
									</div>


									<div class="gw-table__filters">
									<!-- SEARCH IN TABLE-->
									<h:form id="isActiveUsers">

										<!-- Show only active users -->
										<button jsf:id="tableUserAllShowActiveUsers"
                      disabled="true"
											class="btn gw-table__filters__option"
											jsf:action="#{BenutzerverwaltungForm.FilterAlleStart}"
											jsf:immediate="true">
											<i
												class="fa #{BenutzerverwaltungForm.hideInactiveUsers?'fa-check-square-o':'fa-square-o'} margin-right-5"></i>
											<h:outputText styleClass="font-size-s"
												value="#{msgs.nurAktiveNutzerZeigen}" />
											<f:setPropertyActionListener
												target="#{BenutzerverwaltungForm.hideInactiveUsers}"
												value="#{not BenutzerverwaltungForm.hideInactiveUsers}" />
										</button>

									</h:form>


										<!-- Filter by search term -->
										<div class="gw-table__filters__search-bar">
										<h:form id="searchform" styleClass="search-form">
											<div class="input-group">
												<span class="input-group-text"> <i
													class="fa fa-search"></i>
												</span>
												<h:inputText id="searchfield"
													styleClass="form-control searchfield"
													value="#{BenutzerverwaltungForm.filter}">
													<f:passThroughAttribute name="placeholder"
														value="#{msgs.benutzer}" />
													<f:passThroughAttribute name="aria-label"
														value="#{msgs.benutzer}" />
												</h:inputText>
												<button jsf:id="FilterAlle2" jsf:forceId="true" class="btn btn-blank"
                          disabled="true"
													style="text-align: center; line-height: 100%; padding: 0px 10px"
													jsf:action="#{BenutzerverwaltungForm.FilterAlleStart}">
													#{msgs.search}
												</button>
											</div>

											<!-- SUBMIT -->
											<x:commandButton type="submit" id="FilterAlle" forceId="true"
												style="display:none"
												action="#{BenutzerverwaltungForm.FilterAlleStart}" />
											</h:form>
										</div>

									</div> <!-- dataTables__filters-container end -->
								</div> <!-- SEARCH END -->

								<!-- ### Table ### -->
								<h:form id="myform" prependId="false" styleClass="table--scrollx">

								<div class="gw-table__wrapper">
									<table role="grid" id="tableUserAll" class="table table-bordered table-fixed table-hover">
										<!-- ### Columnheader row ### -->
										<thead>
											<tr role="row">
												<intranda:columnheader
														name="name"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.benutzer}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="login"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.login}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="location"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.standort}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="group"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.benutzergruppen}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="projects"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.projekte}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														name="institution"
														form="#{BenutzerverwaltungForm}"
														value="#{msgs.institution}"
														rendered="#{BenutzerverwaltungForm.getNumberOfInstitutions() gt 1}"
														ajaxRender="allUsers:myform" />
												<intranda:columnheader
														value="#{msgs.auswahl}"
														sortable="false"
														addClass="gw-table-fixed__actions"
												/>
											</tr>
										</thead>

										<!-- ### Content rows ### -->
										<ui:repeat var="item"
											value="#{BenutzerverwaltungForm.paginator.list}"
											varStatus="status">
											<tr role="row">
												<td>
													<h:outputText
														value="#{item.nachname}, #{item.vorname}"
														styleClass="userID_#{item.vorname}_#{item.nachname} #{not item.active?'font-light':''}"
														title="#{item.login}" />
												</td>
												<td>
													<h:outputText value="#{item.login}"
														styleClass="#{not item.active?'font-light':''}" />
												</td>
												<td>
													<h:outputText value="#{item.standort}"
														styleClass="#{not item.active?'font-light':''}" />
												</td>
												<td>
													<x:dataList var="intern"
														styleClass="#{not item.active?'font-light':''}"
														rendered="#{item.benutzergruppenSize != 0}"
														value="#{item.benutzergruppen}" layout="ordered list"
														rowCountVar="rowCount" rowIndexVar="rowIndex">
														<h:outputText value="#{intern.titel}" />
														<h:outputText value=","
															rendered="#{rowIndex + 1 lt rowCount}" />
													</x:dataList>
												</td>
												<td>
													<x:dataList var="intern"
														styleClass="#{not item.active?'font-light':''}"
														rendered="#{item.projekteSize != 0}"
														value="#{item.projekte}" layout="ordered list"
														rowCountVar="rowCount" rowIndexVar="rowIndex">
														<h:outputText value="#{intern.titel}" />
														<h:outputText value=","
															rendered="#{rowIndex + 1 lt rowCount}" />
													</x:dataList>
												</td>
												<td jsf:rendered="#{BenutzerverwaltungForm.getNumberOfInstitutions() gt 1}">
													<h:outputText value="#{item.institution.shortName}"
														styleClass="#{not item.active?'font-light':''}" />
												</td>
												<!-- ### Action Buttons ### -->
												<td>
														<div class="gw-table__actions__container">
															<!-- Bearbeiten-Schaltknopf -->
															<button jsf:id="edit" class="btn btn-blank"
                                disabled="true"
																jsf:rel="tooltip" jsf:action="user_edit"
																title="#{msgs.benutzerBearbeiten}">
																<i class="fa fa-pencil"></i>
																<f:passThroughAttribute name="data-toggle"
																	value="tooltip" />
																<f:passThroughAttribute name="aria-label"
																	value="#{msgs.benutzerBearbeiten}" />
																<f:setPropertyActionListener
																	target="#{BenutzerverwaltungForm.myClass}"
																	value="#{item}" />
																<f:setPropertyActionListener
																	target="#{BenutzerverwaltungForm.displayMode}" value="" />
															</button>

															<!-- Benutzerprofil laden-Schaltknopf -->
															<button jsf:id="switch"
                                disabled="true"
																jsf:rendered="#{LoginForm.hasRole('Admin_Users_Allow_Switch')}"
																class="btn btn-blank"
																jsf:action="#{LoginForm.EinloggenAls}"
																title="#{msgs.benutzerprofilLaden}">
																<i class="fa fa-user-secret"></i>
																<f:passThroughAttribute name="aria-label"
																	value="#{msgs.benutzerprofilLaden}" />
																<f:passThroughAttribute name="data-toggle"
																	value="tooltip" />
																<f:passThroughAttribute name="data-placement" value="top" />
																<f:param name="ID" value="#{item.id}" />
															</button>

															<!-- Create new random password for user -->
															<button jsf:id="createNewRandomPassword"
                                disabled="true"
																class="btn btn-blank" jsf:rel="tooltip"
																title="#{msgs.createNewRandomPassword}"
																jsf:rendered="#{LoginForm.hasRole('Admin_Users_Change_Passwords') and (item.ldapGruppe.authenticationType != 'ldap' or not item.ldapGruppe.readonly)}"
																jsf:onclick="if (!confirm('#{msgs.confirmUserPasswordReset}')) return false"
																jsf:action="#{BenutzerverwaltungForm.createNewRandomPasswordForUser}">
																<i class="fa fa-key"></i>
																<f:passThroughAttribute name="data-toggle"
																	value="tooltip" />
																<f:setPropertyActionListener
																	target="#{BenutzerverwaltungForm.myClass}"
																	value="#{item}" />
																<f:passThroughAttribute name="aria-label"
																	value="#{msgs.createNewRandomPassword}" />
																<f:param name="ID" value="#{item.id}" />
																<f:ajax render="globalMessage" />
															</button>
													</div>
												</td>
											</tr>
										</ui:repeat>
									</table>
								</div>
								<div class="form-actions">
									<!-- Neu-Schaltknopf -->
									<button jsf:id="newUser" class="btn btn-primary-400 me-auto"
                    disabled="true"
										jsf:action="#{BenutzerverwaltungForm.Neu}"
										jsf:immediate="true">
										<i class="fa fa-plus"></i>
										<span>#{msgs.neuenBenutzerAnlegen}</span>
										<f:setPropertyActionListener
											target="#{BenutzerverwaltungForm.displayMode}" value="" />
									</button>


									<!-- paginator -->
									<intranda:tablePaginator
										id="users"
										paginator="#{BenutzerverwaltungForm.paginator}"
									/>

								</div>

								</h:form>
							</div>

					</intranda:box>

          <!-- Code block -->
          <div class="mt-4">
            <ui:include src="code_blocks/code_table_in_box.xhtml">
              <ui:param name="ID" value="codeTableInBox" />
            </ui:include>
          </div>

    </article>



  	</composite:implementation>
</ui:composition>

