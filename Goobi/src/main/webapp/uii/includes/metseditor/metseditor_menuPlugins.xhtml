<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

    <composite:interface />

    <composite:implementation>
        <h:form id="meMenuPluginsForm" rendered="#{!Metadaten.extensions.isEmpty()}">
            <ul class="clean">
                <li class="separator"></li>

                <li>
                    <button
                        id="configDropdown"
                        type="button"
                        class="btn btn--clean"
                        aria-label="#{msgs.plugins}"
                        title="#{msgs.plugins}"
                        aria-haspopup="true"
                        aria-expanded="false"
                        onclick="switchExpanded(this.id)"
                        data-show="submenu"
                        data-toggle="tooltip"
                        data-placement="bottom">
                        <i
                            class="fa fa-plug fa-lg"
                            aria-hidden="true"></i>
                    </button>


                    <ul class="clean submenu" style="display: none;">
                        <ui:repeat
                            var="extension"
                            value="#{Metadaten.extensions}">
                            <li>
                                <button
                                    jsf:id="openExtension"
                                    class="dropdown-item"
                                    jsf:onclick="setTimeout(function() {$('##{extension.modalId}').modal('show');}, 200 );"
                                    type="button">
                                    <i
                                        class="fa fa-plug"
                                        aria-hidden="true"></i>
                                    <h:outputText value="#{msgs[extension.title]}" />
                                    <f:setPropertyActionListener
                                        value="#{extension}"
                                        target="#{Metadaten.extension}" />

                                    <f:ajax
                                        execute="@this"
                                        render="#{extension.modalId}" />
                                </button>
                            </li>

                        </ui:repeat>

                    </ul>
                </li>


                <li class="separator"></li>

            </ul>
        </h:form>
    </composite:implementation>
</ui:composition>