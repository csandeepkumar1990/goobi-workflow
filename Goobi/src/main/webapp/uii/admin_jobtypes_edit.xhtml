<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	template="/uii/templatePG/templatePG.html"
	xmlns:x="http://myfaces.apache.org/tomahawk"
	xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

	<ui:param name="myPageTitle" value="#{msgs.manageAutomaticTasks}" />

	<ui:define name="breadcrumb">
			<intranda:breadcrumb id="index" label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}" action="index" navId="a0" />
			<intranda:breadcrumb id="admin_jobtypes_all" label="#{msgs.manageAutomaticTasks}" action="admin_jobtypes_all.xhtml" />
			<intranda:breadcrumb id="admin_jobtypes_edit" label="#{msgs.editJobType}" action="admin_jobtypes_edit.xhtml" noSeparator="#{true}" />
	</ui:define>

	<ui:define name="info">
	</ui:define>

	<ui:define name="content">
			<h:form rendered="#{LoginForm.hasRole('Admin_Jobtypes')}">
			<div class="row" role="main">
			<div class="col-sm-12">

			<intranda:box
				boxType="action"
				icon="fa-gears"
				title="#{msgs.editJobType}"
				padding="false">

				<intranda:formInputText label="#{msgs.titel}" id="title"
					field="#{JobTypesBean.currentJobType.name}"
					help="#{msgs.helpTitel}" name="titel" fieldStyle="form-control" />
				<intranda:formInputCheckBox label="#{msgs.paused}" id="paused"
					field="#{JobTypesBean.currentJobType.paused}"
					help="#{msgs.helpTitel}" name="titel" />

				<div class="form-group d-flex">
					<div class="col-sm-3 control-label">
						<label>#{msgs.steps}</label>
					</div>
					<div class="col-sm-9 d-flex">
						<div class="col-sm-6">
							<h3 tabindex="0">#{msgs.jobtypes_assignedSteps}</h3>
							<ui:repeat var="stepTitle" value="#{JobTypesBean.currentJobType.stepNameList}">
								<button class="badge bg-success me-2"
									 jsf:action="#{JobTypesBean.removeStepFromCurrentJobType(stepTitle)}">
									 <f:ajax render="@form" execute="@form"/>
									 #{stepTitle}
									 <i class="fa fa-minus ms-2"></i>
								</button>
							</ui:repeat>
						</div>
						<div class="col-sm-6 ps-3">
							<h3 tabindex="0">#{msgs.jobtypes_availableSteps}</h3>
							<ui:repeat var="stepTitle" value="#{JobTypesBean.availableStepTitles}">
								<button class="badge bg-primary-400"
									 jsf:action="#{JobTypesBean.addStepToCurrentJobType(stepTitle)}">
									 <f:ajax render="@form" execute="@form"/>
									 #{stepTitle}
									 <i class="fa fa-plus"></i>
								 </button>
							</ui:repeat>
						</div>
					</div>
				</div>

				<div class="form-actions">
					<button class="btn btn-hot me-2"
						onclick="if (!confirm('#{msgs.sollDerContentWirklichGeloeschtWerden}')) return false"
						jsf:action="#{JobTypesBean.deleteCurrentJobType}"
						jsf:rendered="#{not JobTypesBean.currentJobTypeNew}">
						<i class="fa fa-trash"></i>
						#{msgs.loeschen}
					</button>
					<button class="btn btn-primary-400 me-2" jsf:action="#{JobTypesBean.saveCurrentJobType}">
						<i class="fa fa-save ms-2"></i>
						#{msgs.save}
					</button>
					<button class="btn btn-blank"
						jsf:immediate="true"
						jsf:action="#{JobTypesBean.cancelJobTypeEdit}">
						#{msgs.cancel}
					</button>
				</div>

			</intranda:box>

		</div> <!-- end col-sm-12 -->
	</div> <!-- end row -->

	</h:form>
</ui:define>

</ui:composition>
